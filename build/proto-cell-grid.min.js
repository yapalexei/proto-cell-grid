/*! proto-cell-grid version 1.0.1 built: 2019-12-30 */

var Cell=function(a){this.id=a&&a.id||void 0,this.width=a&&a.width||0,this.height=a&&a.height||0,this.label=a&&a.label||"",this.cellEl=a&&a.cellEl||void 0,this.parentEl=a&&a.parentEl||void 0,this.cellType=a&&a.cellType||void 0,this.cellContentType=a&&a.cellContentType||void 0,this.labelNode=a&&a.labelNode||void 0,this.events=[]};Cell.prototype.destroy=function(){this.cellEl.removeEventListener("click",this)},Cell.prototype.handleEvent=function(a){var b=this.cellEl.getBoundingClientRect(),c=this.parentEl,d=this.cellEl.cloneNode(!0);c.classList.add("item-selected"),d.style.top=b.top+window.pageYOffset+"px",d.style.left=b.left+window.pageXOffset+"px",d.classList.add("cloned"),document.body.appendChild(d);var e=document.body.getBoundingClientRect(),f=e.height/2-100,g=e.width/2-100;setTimeout(function(){d.classList.add("scaled"),d.style.top=f+"px",d.style.left=g+"px",d.style.width="200px",d.style.height="200px"},100),d.addEventListener("click",function(){this.removeEventListener("click",this),document.removeEventListener("mousemove",j),document.body.removeChild(this),c.classList.remove("item-selected")},!1);var h,i=this.parentEl.getBoundingClientRect();setTimeout(function(){h=d.getBoundingClientRect()},80);var j=function(a){var b=(a.clientX-i.width/2)/8,c=(a.clientY-i.height/2)/8;d.style.top=i.height/2+c-h.height/2+"px",d.style.left=i.width/2+b-h.width/2+"px"}},Cell.prototype.init=function(){if(!this.cellType)throw"must provide cell type like div or span";var a;this.cellEl=document.createElement(this.cellType),this.labelNode=document.createTextNode(this.label),this.cellContentType?(a=document.createElement(this.cellContentType),a.appendChild(this.labelNode),this.cellEl.appendChild(a)):this.cellEl.appendChild(this.labelNode),this.cellEl.className="cell",this.cellEl.style.width=this.width+"px",this.cellEl.style.height=this.height+"px",this.cellEl.style.lineHeight=this.height+"px",this.cellEl.addEventListener("click",this,!1)},Cell.prototype.setLabel=function(a){this.labelNode.nodeValue=a};var Grid=function(a){this.gridEl=a&&a.gridEl||void 0,this.cellType=a&&a.cellType||"div",this.rows=a&&a.rows||0,this.columns=a&&a.columns||0,this.width=a&&a.width||0,this.height=a&&a.height||0,this.cellCount=this.rows*this.columns,this.cellContentType=a.cellContentType||void 0,this.cells=[]};Grid.prototype.addCell=function(a){var b=new Cell(a);b.init(),b.setLabel(this.cells.length+1),this.cells.push(b),this.gridEl.appendChild(b.cellEl)},Grid.prototype.removeCell=function(a){var b=this.cells.pop();b&&b.destroy(),this.gridEl.removeChild(this.gridEl.lastChild)},Grid.prototype.init=function(){if(!this.gridEl)throw"Grid element required!";if(this.rows<=0||this.columns<=0)throw"rows and columns must be above 0";this.gridEl.style.width=this.width+"px";for(var a=0;a<this.cellCount;a++){var b={width:this.width/this.columns,height:this.width/this.columns,cellType:this.cellType,parentEl:this.gridEl.parentNode,cellContentType:this.cellContentType};this.addCell(b)}},Grid.prototype.clearAll=function(){for(;this.gridEl.lastChild;)this.removeCell()},Grid.prototype.update=function(a){this.clearAll(),this.rows=a&&a.rows||this.rows,this.columns=a&&a.columns||this.columns,this.width=a&&a.width||this.width,this.height=a&&a.height||this.height,this.cellCount=this.rows*this.columns;for(var b=0;b<this.cellCount;b++){var c={id:b,width:this.width/this.columns,height:this.width/this.columns,cellType:this.cellType,cellContentType:this.cellContentType,parentEl:this.gridEl.parentNode};this.addCell(c)}};